{% extends 'base.html' %}
{% load static %}
{% block content %}

<div class="container">
    <div>
        <h1>Add Bins to your Schedule</h1>
        <p>Schedule Title: {{ schedule }}</p>
        <p>Schedule Location: {{ schedule.locations }}</p>
        <p>Schedule Description{{ schedule.description }}</p>
    </div>

    <!-- FullCalendar -->
    <div id='calendar'></div>

    <!-- Modal for Event Creation -->
    <div class="modal" tabindex="-1" id="createEventModal">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="create-event-modal-title"></h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p>
                        Pick a bin type:
                        <select name="bin-type" id="bin-type">
                            <option value="Restmüll">Restmüll</option>
                            <option value="Biomüll">Biomüll</option>
                            <option value="Papiermüll">Papiermüll</option>
                            <option value="Gelbe Tonne">Gelbe Tonne</option>
                        </select>
                    </p>
                    <p>
                        This bin will be collected every:
                        <select name="recurrence" id="recurrence">
                            <option value="0">no recurrence</option>
                            <option value="1">weekly</option>
                            <option value="2">every other week</option>
                            <option value="3">every third week</option>
                            <option value="4">every fourth week</option>
                        </select>
                    </p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" id="save-event">Save changes</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal for Event Deletion -->
    <div class="modal" tabindex="-1" id="deleteEventModal">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="delete-event-modal-title"></h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p>
                        Pick a bin type:
                        <select name="delete-select" id="delete-select">
                            <option value="only this event">only this event</option>
                            <option value="all the events in this group">all the events in this group</option>
                        </select>
                    </p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" id="delete-event">Delete</button>
                </div>
            </div>
        </div>
    </div>

    <!-- CSRF Token for the POST method that sends the events json data -->
    <form method="post">
        {% csrf_token %}
    </form>

    <!-- Button to save the events by triggering the POST request -->
    <div class="btn btn-primary" id="submit-button">Save</div>
</div>

<!-- Json string of events in this schedule -->
{{ event_data|json_script:"event-data" }}

<!-- rrule lib -->
<script src='https://cdn.jsdelivr.net/npm/rrule@2.6.4/dist/es5/rrule.min.js'></script>

<!-- fullcalendar bundle -->
<script src='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.11/index.global.min.js'></script>

<!-- the rrule-to-fullcalendar connector. must go AFTER the rrule lib -->
<script src='https://cdn.jsdelivr.net/npm/@fullcalendar/rrule@6.1.11/index.global.min.js'></script>

<!-- Script to handle full Calendar -->
<script src="{% static 'js/edit_calendar.js' %}"></script>

{% endblock %}